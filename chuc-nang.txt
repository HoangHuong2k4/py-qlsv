Chá»©c nÄƒng vá»›i sinh viÃªn vÃ  admin
Vá»›i sinh viÃªn: 
+Sinh viÃªn má»›i (chÆ°a tiáº¿n trÃ¬nh)
-ÄÄƒng nháº­p, Ä‘Äƒng xuáº¥t
-Gá»£i Ã½ tá»« hk1 nÄƒm 1
-Dowload gá»£i Ã½
-Biá»ƒu Ä‘á»“ sá»‘ tÃ­n chá»‰ trong há»c kÃ¬
+Sinh viÃªn Ä‘Ã£ há»c trÃªn 1 há»c kÃ¬ (cÃ³ tiÃ©n trÃ¬nh):
-ÄÄƒng nháº­p, Ä‘Äƒng xuáº¥t
-Hiá»ƒn thá»‹ lá»‹ch sá»­ cÃ¡c há»c pháº§n Ä‘Ã£ há»c
-Gá»£i Ã½ cÃ¡c há»c pháº§n tiáº¿p theo
-Biá»ƒu Ä‘á»“ sá»‘ tÃ­n chá»‰ trong há»c kÃ¬
-Dowload gá»£i Ã½

Vá»›i admin:
-ÄÄƒng nháº­p, Ä‘Äƒng xuáº¥t
-Quáº£n lÃ½ sinh viÃªn, quáº£n lÃ½ mÃ´n há»c

# ğŸ“‹ DANH SÃCH CHI TIáº¾T CHá»¨C NÄ‚NG NGHIá»†P Vá»¤ - Há»† THá»NG QUáº¢N LÃ Há»ŒC Táº¬P

*Cáº­p nháº­t: 30 thÃ¡ng 11, 2025*

---

## ğŸ¯ TÃ³m táº¯t Tá»•ng Quan

Há»‡ thá»‘ng lÃ  **ná»n táº£ng quáº£n lÃ½ há»c táº­p vÃ  gá»£i Ã½ mÃ´n há»c thÃ´ng minh** dá»±a trÃªn:
- **K-Means Clustering** Ä‘á»ƒ phÃ¢n tÃ­ch mÃ´ hÃ¬nh há»c táº­p sinh viÃªn (5 nhÃ³m)
- **Machine Learning** Ä‘á»ƒ gá»£i Ã½ mÃ´n há»c tá»‘i Æ°u cho tá»«ng sinh viÃªn
- **Flask Web** Ä‘á»ƒ cung cáº¥p giao diá»‡n ngÆ°á»i dÃ¹ng (Student + Admin)
- **MySQL Database** Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u sinh viÃªn, mÃ´n há»c, tiáº¿n trÃ¬nh há»c
- **ReportLab/WeasyPrint** Ä‘á»ƒ táº¡o file PDF káº¿ hoáº¡ch há»c táº­p
- **Chart.js** Ä‘á»ƒ visualize tÃ­n chá»‰ theo ká»³ há»c

---

## ğŸ” CHá»¨C NÄ‚NG QUáº¢N LÃ TÃ€I KHOáº¢N

### 1. ÄÄƒng Nháº­p (Login)
- **Route:** `POST /login`
- **Chá»©c nÄƒng:**
  - XÃ¡c thá»±c mÃ£ sinh viÃªn + máº­t kháº©u
  - Há»— trá»£ máº­t kháº©u plaintext (legacy) vÃ  hashed (pbkdf2:sha256)
  - Tá»± Ä‘á»™ng convert plaintext â†’ hash khi Ä‘Äƒng nháº­p láº§n Ä‘áº§u
  - LÆ°u session: `student_id`, `student_name`
  - Hiá»ƒn thá»‹ lá»—i náº¿u sai tÃ i khoáº£n
- **Báº£ng dá»¯ liá»‡u:** `SinhVien` (StudentID, Password, HoTen)
- **UI Template:** `login.html`

### 2. ÄÄƒng Xuáº¥t (Logout)
- **Route:** `GET /logout`
- **Chá»©c nÄƒng:**
  - XoÃ¡ session
  - Chuyá»ƒn hÆ°á»›ng vá» trang Ä‘Äƒng nháº­p
- **UI Template:** Redirect to `index.html`

### 3. Trang Chá»§ / Index
- **Route:** `GET /` (2 route cÃ¹ng tÃªn - cáº§n sá»­a)
- **Chá»©c nÄƒng:**
  - Náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p â†’ chuyá»ƒn sang Dashboard
  - Náº¿u chÆ°a Ä‘Äƒng nháº­p â†’ hiá»ƒn thá»‹ trang Ä‘Äƒng nháº­p
- **UI Template:** `index.html` / `login.html`

---

## ğŸ“Š CHá»¨C NÄ‚NG DASHBOARD CHÃNH

### 4. Dashboard Sinh ViÃªn
- **Route:** `GET /dashboard`
- **YÃªu cáº§u:** Pháº£i Ä‘Äƒng nháº­p
- **Chá»©c nÄƒng chÃ­nh:**
  
  #### 4.1 Hiá»ƒn thá»‹ thÃ´ng tin sinh viÃªn
  - MÃ£ sá»‘, há» tÃªn
  - Tá»•ng tÃ­n chá»‰ Ä‘Ã£ há»c / tÃ­n chá»‰ yÃªu cáº§u (156 TC)
  - Tiáº¿n Ä‘á»™ theo % (progress bar)
  
  #### 4.2 Hiá»ƒn thá»‹ lá»‹ch sá»­ há»c táº­p
  - Danh sÃ¡ch táº¥t cáº£ mÃ´n Ä‘Ã£ há»c
  - Cá»™t: MÃ£ mÃ´n, tÃªn mÃ´n, tÃ­n chá»‰, nÄƒm, ká»³, Ä‘iá»ƒm, tráº¡ng thÃ¡i
  - Sáº¯p xáº¿p theo Year, Semester
  - TÃ­nh tá»•ng TC: cÃ¡c mÃ´n cÃ³ Status = "ÄÃ£ há»c" hoáº·c "ÄÃ£ qua"
  
  #### 4.3 Gá»£i Ã½ mÃ´n há»c tiáº¿p theo
  - Gá»i hÃ m `recommend_next_courses(student_id)`
  - Hiá»ƒn thá»‹ danh sÃ¡ch gá»£i Ã½ (náº¿u cÃ³)
  - Má»—i gá»£i Ã½ gá»“m: MÃ£ mÃ´n, tÃªn, tÃ­n chá»‰, mÃ´ táº£, má»¥c Ä‘Ã­ch há»c
  - PhÃ¢n loáº¡i gá»£i Ã½ theo nhÃ³m (HK1 nÄƒm 5 - Luáº­n vÄƒn, CÃ¡c mÃ´n bá»• sung)
  
  #### 4.4 NÃºt Ä‘iá»u hÆ°á»›ng chÃ­nh
  - "ğŸ“š 5 Káº¿ Hoáº¡ch Há»c Táº­p" â†’ `/learning-plans`
  
- **Báº£ng dá»¯ liá»‡u Ä‘Æ°á»£c sá»­ dá»¥ng:**
  - `SinhVien` (thÃ´ng tin cÃ¡ nhÃ¢n)
  - `TienTrinh` (lá»‹ch sá»­ há»c)
  - `MonHoc` (thÃ´ng tin mÃ´n há»c)
  
- **UI Template:** `student_dashboard.html`

---

## ğŸ“ CHá»¨C NÄ‚NG Gá»¢I Ã MÃ”N Há»ŒC

### 5. Gá»£i Ã½ MÃ´n Há»c - Há»‡ Thá»‘ng ChÃ­nh
- **Route:** `GET /dashboard` (gá»i tá»« Ä‘Ã¢y)
- **Chá»©c nÄƒng:**
  - PhÃ¢n tÃ­ch dá»¯ liá»‡u lá»‹ch sá»­ há»c cá»§a sinh viÃªn
  - **Náº¿u sinh viÃªn cÃ³ dá»¯ liá»‡u (`TienTrinh`):**
    - DÃ¹ng K-Means model Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cluster
    - Láº¥y cÃ¡c sinh viÃªn cÃ¹ng cluster
    - PhÃ¢n tÃ­ch cÃ¡c mÃ´n há» há»c tiáº¿p theo
    - Gá»£i Ã½ dá»±a trÃªn mÃ´ hÃ¬nh há»c táº­p tÆ°Æ¡ng tá»±
  
  - **Náº¿u sinh viÃªn má»›i (khÃ´ng cÃ³ `TienTrinh`):**
    - Fallback: Gá»£i Ã½ dá»±a trÃªn sinh viÃªn tá»‘t nghiá»‡p
    - Láº¥y HK1 nÄƒm 1 (mÃ´n cÆ¡ báº£n)
    - Sá»­ dá»¥ng mÃ´ hÃ¬nh tá»« sinh viÃªn OnTime = True, Graduated = True
  
- **Module:** `recommender/recommend.py` â†’ hÃ m `recommend_next_courses()`
- **Fallback logic:** `recommender/ontime_graduate_recommender.py` â†’ hÃ m `recommend_for_new_student()`
- **Output:**
  - Danh sÃ¡ch mÃ´n gá»£i Ã½ vá»›i metadata:
    - CourseCode, CourseName, Credits, Semester, Year
    - recommendation_group (nhÃ³m gá»£i Ã½)
    - recommendation_type (loáº¡i gá»£i Ã½)
# ğŸ¯ CHI TIáº¾T: Gá»¢IY MÃ”N Há»ŒC CHO SINH VIÃŠN Má»šI vs SINH VIÃŠN CÃ“ TIáº¾N TRÃŒNH

### A. SINH VIÃŠN Má»šI (New Student - KhÃ´ng cÃ³ TienTrinh)

#### Äá»‹nh nghÄ©a:
- Sinh viÃªn Ä‘Äƒng nháº­p láº§n Ä‘áº§u
- Hoáº·c sinh viÃªn chÆ°a bao giá» há»c mÃ´n nÃ o (TienTrinh trá»‘ng)
- VÃ­ dá»¥: B2200012 (má»›i Ä‘Æ°á»£c thÃªm vÃ o há»‡ thá»‘ng), hoáº·c sinh viÃªn chá»‰ vá»«a Ä‘Äƒng kÃ½

#### Quy trÃ¬nh Gá»£i Ã½ (Fallback Strategy):

**Step 1: Kiá»ƒm tra dá»¯ liá»‡u TienTrinh**
```python
# Trong app.py / recommend_next_courses()
student_progress = db.query(TienTrinh).filter(TienTrinh.StudentID == student_id).all()
if not student_progress or len(student_progress) == 0:
    # â†’ Sinh viÃªn Má»šI, gá»i fallback
    return recommend_for_new_student(student_id)
```

**Step 2: Gá»i `ontime_graduate_recommender.recommend_for_new_student()`**
```python
def recommend_for_new_student(student_id):
    """
    Gá»£i Ã½ cho sinh viÃªn má»›i dá»±a trÃªn sinh viÃªn tá»‘t nghiá»‡p Ä‘Ãºng háº¡n
    """
    # 1. Lá»c sinh viÃªn "máº«u" (OnTime + Graduated)
    good_students = db.query(TienTrinh).filter(
        TienTrinh.OnTime == True,
        TienTrinh.Graduated == True
    ).all()
    
    # 2. Láº¥y cÃ¡c sinh viÃªn nÃ y há»c mÃ´n gÃ¬ á»Ÿ HK1 nÄƒm 1
    hk1_year1_courses = db.query(TienTrinh).filter(
        TienTrinh.StudentID.in_([s.StudentID for s in good_students]),
        TienTrinh.Year == 1,
        TienTrinh.Semester == 1
    ).all()
    
    # 3. Äáº¿m táº§n suáº¥t tá»«ng mÃ´n
    course_frequency = Counter([record.CourseCode for record in hk1_year1_courses])
    
    # 4. Láº¥y top 8 mÃ´n phá»• biáº¿n nháº¥t
    top_courses = course_frequency.most_common(8)
    
    # 5. Return danh sÃ¡ch gá»£i Ã½
    return [
        {
            'CourseCode': course_code,
            'CourseName': get_course_name(course_code),
            'Credits': get_course_credits(course_code),
            'Year': 1,
            'Semester': 1,
            'recommendation_group': 'HK1 NÄƒm 1 (MÃ´n CÆ¡ Báº£n)',
            'recommendation_type': 'new_student_default',
            'reason': 'Gá»£i Ã½ cho sinh viÃªn má»›i dá»±a trÃªn mÃ´ hÃ¬nh tá»« sinh viÃªn tá»‘t nghiá»‡p'
        }
        for course_code in [c[0] for c in top_courses]
    ]
```

#### Káº¿t quáº£ gá»£i Ã½ cho sinh viÃªn má»›i:
- **ÄÆ°á»£c gá»£i Ã½:** Top 8 mÃ´n tá»« HK1 nÄƒm 1 (mÃ´n cÆ¡ báº£n)
- **VÃ­ dá»¥ mÃ´n gá»£i Ã½:** 
  - CT100: Ká»¹ nÄƒng há»c Ä‘áº¡i há»c (khá»‘i ngÃ nh CNTT) - 2 TC
  - TN010: XÃ¡c suáº¥t thá»‘ng kÃª - 3 TC
  - QP010-QP013: GiÃ¡o dá»¥c quá»‘c phÃ²ng (4 mÃ´n Ã— 2 TC)
  - TC100_2: GiÃ¡o dá»¥c thá»ƒ cháº¥t - 1 TC
  - VÃ  1-2 mÃ´n khÃ¡c phá»• biáº¿n

#### Logic phÃ­a sau:
```
Táº¡i sao chá»n HK1 nÄƒm 1?
â”œâ”€ Sinh viÃªn má»›i cháº¯c cháº¯n pháº£i há»c HK1 nÄƒm 1 (mÃ´n báº¯t buá»™c)
â”œâ”€ Äá»ƒ xÃ¡c Ä‘á»‹nh top 8 mÃ´n, ta xem sinh viÃªn "tá»‘t" há»c gÃ¬
â”œâ”€ Sinh viÃªn "tá»‘t" = OnTime + Graduated (tá»‘t nghiá»‡p Ä‘Ãºng háº¡n)
â””â”€ Giáº£ thiáº¿t: Náº¿u há» há»c nhá»¯ng mÃ´n nÃ y á»Ÿ HK1, nÃ³ phÃ¹ há»£p cho sinh viÃªn má»›i

Táº¡i sao khÃ´ng dÃ¹ng K-Means?
â”œâ”€ Sinh viÃªn má»›i khÃ´ng cÃ³ TienTrinh (khÃ´ng cÃ³ features)
â”œâ”€ KhÃ´ng thá»ƒ assign vÃ o cluster náº¿u khÃ´ng cÃ³ dá»¯ liá»‡u
â””â”€ Fallback: DÃ¹ng "best practice" tá»« sinh viÃªn thÃ nh cÃ´ng
```

---

### B. SINH VIÃŠN CÃ“ TIáº¾N TRÃŒNH (Existing Student - CÃ³ TienTrinh)

#### Äá»‹nh nghÄ©a:
- Sinh viÃªn Ä‘Ã£ há»c Ã­t nháº¥t 1 ká»³ há»c
- CÃ³ cÃ¡c record trong báº£ng `TienTrinh`
- VÃ­ dá»¥: B2100001 (há»c tá»« ká»³ 1 nÄƒm 1), B2100045 (há»c tá»« nhiá»u ká»³)

#### Quy trÃ¬nh Gá»£i Ã½ (K-Means Clustering Strategy):

**Step 1: Kiá»ƒm tra dá»¯ liá»‡u TienTrinh**
```python
# Trong app.py / recommend_next_courses()
student_progress = db.query(TienTrinh).filter(TienTrinh.StudentID == student_id).all()
if student_progress and len(student_progress) > 0:
    # â†’ Sinh viÃªn CÃ“ TIáº¾N TRÃŒNH, dÃ¹ng clustering
    return clustering_recommender_v2.get_recommendations(student_id)
```

**Step 2: Load K-Means Model & Scaler**
```python
# Trong clustering_recommender_v2.py
import pickle

# Load model
with open('models/kmeans_model.pkl', 'rb') as f:
    kmeans_model = pickle.load(f)

# Load scaler (Ä‘á»ƒ normalize features)
with open('models/scaler.pkl', 'rb') as f:
    scaler = pickle.load(f)
```

**Step 3: Táº¡o Feature Vector cho sinh viÃªn**
```python
def get_student_features(student_id):
    """
    Táº¡o vector 53 chiá»u: sá»‘ tÃ­n chá»‰ Ä‘áº¡t Ä‘Æ°á»£c cho má»—i mÃ´n
    """
    # 53 mÃ´n duy nháº¥t trong há»‡ thá»‘ng
    all_courses = ['CT100', 'CT101', 'CT112', ..., 'XH025']  # 53 courses
    
    # Láº¥y TienTrinh cá»§a sinh viÃªn
    progress = db.query(TienTrinh).filter(TienTrinh.StudentID == student_id).all()
    
    # Táº¡o dictionary: {CourseCode: Credits}
    # Chá»‰ count cÃ¡c mÃ´n PASSED (Score >= 4.0 hoáº·c Status = 'ÄÃ£ qua')
    passed_courses = {
        record.CourseCode: record.Credits 
        for record in progress 
        if record.Score >= 4.0 or record.Status == 'ÄÃ£ qua'
    }
    
    # Build feature vector (53 chiá»u)
    feature_vector = []
    for course in all_courses:
        if course in passed_courses:
            feature_vector.append(passed_courses[course])
        else:
            feature_vector.append(0)  # ChÆ°a há»c hoáº·c khÃ´ng Ä‘áº¡t
    
    # Result: [0, 4, 3, 0, 0, 3, 2, ..., 1]  (53 elements)
    #         CT100, CT101, CT112, ...
    #         2TC,   4TC,   3TC, ...
    return feature_vector
```

**Step 4: Normalize Feature & Predict Cluster**
```python
def assign_to_cluster(student_id):
    """
    XÃ¡c Ä‘á»‹nh sinh viÃªn thuá»™c cluster nÃ o
    """
    # Step 1: Láº¥y feature vector (53 chiá»u)
    features = get_student_features(student_id)
    
    # Step 2: Normalize (z-score) Ä‘á»ƒ match training data
    features_normalized = scaler.transform([features])
    
    # Step 3: Predict cluster (0-4)
    cluster_id = kmeans_model.predict(features_normalized)[0]
    
    # Result: 0, 1, 2, 3, hoáº·c 4
    return cluster_id
```

**Step 5: TÃ¬m sinh viÃªn cÃ¹ng cluster**
```python
def find_similar_students(student_id):
    """
    TÃ¬m cÃ¡c sinh viÃªn khÃ¡c cÃ¹ng cluster
    """
    # Step 1: XÃ¡c Ä‘á»‹nh cluster cá»§a sinh viÃªn target
    student_cluster = assign_to_cluster(student_id)
    
    # Step 2: Láº¥y táº¥t cáº£ sinh viÃªn khÃ¡c
    all_students = db.query(SinhVien).all()
    
    # Step 3: Duyá»‡t vÃ  gÃ¡n cluster cho má»—i sinh viÃªn
    similar_students = []
    for student in all_students:
        if student.StudentID != student_id:  # Loáº¡i bá» chÃ­nh sinh viÃªn
            other_cluster = assign_to_cluster(student.StudentID)
            if other_cluster == student_cluster:
                similar_students.append(student.StudentID)
    
    # Result: ['B2100001', 'B2100023', 'B2100045', ...]
    return similar_students
```

**Step 6: PhÃ¢n tÃ­ch mÃ´n há» há»c tiáº¿p theo**
```python
def analyze_next_courses(student_id):
    """
    PhÃ¢n tÃ­ch: Sinh viÃªn á»Ÿ cluster nÃ y, ká»³ tiáº¿p theo há»c gÃ¬?
    """
    # Step 1: Láº¥y danh sÃ¡ch sinh viÃªn cÃ¹ng cluster
    similar_students = find_similar_students(student_id)
    
    # Step 2: Láº¥y ká»³ hiá»‡n táº¡i cá»§a sinh viÃªn target
    current_progress = db.query(TienTrinh).filter(
        TienTrinh.StudentID == student_id
    ).order_by(TienTrinh.Year.desc(), TienTrinh.Semester.desc()).first()
    
    current_year = current_progress.Year
    current_semester = current_progress.Semester
    
    # Step 3: XÃ¡c Ä‘á»‹nh "ká»³ tiáº¿p theo"
    if current_semester < 3:
        next_year = current_year
        next_semester = current_semester + 1
    else:
        next_year = current_year + 1
        next_semester = 1
    
    # Step 4: Láº¥y cÃ¡c mÃ´n há» há»c á»Ÿ ká»³ tiáº¿p theo
    next_courses = db.query(TienTrinh).filter(
        TienTrinh.StudentID.in_(similar_students),
        TienTrinh.Year == next_year,
        TienTrinh.Semester == next_semester
    ).all()
    
    # Step 5: Äáº¿m táº§n suáº¥t (course popularity in next semester)
    course_frequency = Counter([record.CourseCode for record in next_courses])
    
    # Step 6: Lá»c cÃ¡c mÃ´n sinh viÃªn target chÆ°a há»c
    student_passed_courses = {
        record.CourseCode for record in 
        db.query(TienTrinh).filter(
            TienTrinh.StudentID == student_id,
            TienTrinh.Score >= 4.0
        ).all()
    }
    
    recommended_courses = [
        course for course in course_frequency.keys()
        if course not in student_passed_courses
    ]
    
    # Result: [('CT101', 7), ('CT172', 6), ('QP010', 5), ...]
    #         MÃ´ táº£: Trong cluster nÃ y, á»Ÿ ká»³ tiáº¿p theo,
    #         - 7 sinh viÃªn há»c CT101
    #         - 6 sinh viÃªn há»c CT172
    #         - v.v.
    return course_frequency.most_common(8)
```

**Step 7: Return Gá»£i Ã½**
```python
def get_recommendations(student_id):
    """
    Return danh sÃ¡ch gá»£i Ã½ cho sinh viÃªn
    """
    cluster_id = assign_to_cluster(student_id)
    recommended_courses = analyze_next_courses(student_id)
    
    recommendations = []
    for course_code, frequency in recommended_courses:
        course_info = db.query(MonHoc).filter(
            MonHoc.CourseCode == course_code
        ).first()
        
        recommendations.append({
            'CourseCode': course_code,
            'CourseName': course_info.CourseName,
            'Credits': course_info.Credits,
            'Semester': 'HK1 NÄƒm 5',  # TÃ¹y sinh viÃªn hiá»‡n táº¡i
            'Year': 5,
            'recommendation_group': 'HK1 NÄƒm 5 - CÃ¡c MÃ´n Bá»• Sung',
            'recommendation_type': 'clustering_based',
            'reason': f'Gá»£i Ã½ dá»±a trÃªn mÃ´ hÃ¬nh cluster {cluster_id} ({frequency} sinh viÃªn cÃ¹ng mÃ´ hÃ¬nh há»c nÃ y)',
            'cluster_id': cluster_id,
            'popularity': frequency
        })
    
    return recommendations
```

#### Káº¿t quáº£ gá»£i Ã½ cho sinh viÃªn cÃ³ tiáº¿n trÃ¬nh:
- **ÄÆ°á»£c gá»£i Ã½:** Top 8 mÃ´n phÃ¹ há»£p vá»›i mÃ´ hÃ¬nh há»c táº­p cá»§a sinh viÃªn (cluster)
- **VÃ­ dá»¥:** Náº¿u sinh viÃªn B2100001 thuá»™c Cluster 0 (á»”n Ä‘á»‹nh, tÃ­ch luá»¹ Ä‘á»u)
  - Há»‡ thá»‘ng tÃ¬m táº¥t cáº£ sinh viÃªn á»Ÿ Cluster 0
  - Xem há» há»c gÃ¬ á»Ÿ HK1 nÄƒm 5
  - Gá»£i Ã½ top 8 mÃ´n phá»• biáº¿n nháº¥t
  - VÃ­ dá»¥: CT555 (Luáº­n vÄƒn), cÃ¡c mÃ´n chuyÃªn Ä‘á», v.v.

#### Logic phÃ­a sau:
```
Táº¡i sao dÃ¹ng K-Means Clustering?

1. GIáº¢ THIáº¾T: 
   - Sinh viÃªn cÃ³ mÃ´ hÃ¬nh há»c táº­p tÆ°Æ¡ng tá»± â†’ nÃªn há»c mÃ´n tÆ°Æ¡ng tá»±
   - VÃ­ dá»¥: Náº¿u báº¡n "á»•n Ä‘á»‹nh, tÃ­ch luá»¹ Ä‘á»u" nhÆ° Cluster 0
   - ThÃ¬ báº¡n nÃªn há»c nhá»¯ng mÃ´n mÃ  Cluster 0 thÆ°á»ng há»c

2. QUY TRÃŒNH:
   - XÃ¢y dá»±ng "profile" sinh viÃªn tá»« lá»‹ch sá»­ (vector 53 chiá»u)
   - So sÃ¡nh profile vá»›i 5 clusters Ä‘Ã£ train tá»« 78 sinh viÃªn
   - TÃ¬m sinh viÃªn cÃ¹ng cluster
   - PhÃ¢n tÃ­ch mÃ´n há» há»c á»Ÿ ká»³ tiáº¿p theo
   - Gá»£i Ã½ top 8 mÃ´n phÃ¹ há»£p

3. VÃ Dá»¤:
   - Sinh viÃªn B2100045 cÃ³ lá»‹ch sá»­: [0, 4, 3, 0, 2, ..., 1] (53 chiá»u)
   - K-Means predict: Cluster 1 (TÄƒng Ä‘á»™t biáº¿n theo ká»³)
   - TÃ¬m 10 sinh viÃªn khÃ¡c á»Ÿ Cluster 1
   - Há» há»c gÃ¬ á»Ÿ HK1 nÄƒm 5? â†’ CT555, CT556, QP015, v.v.
   - Gá»£i Ã½: Nhá»¯ng mÃ´n nÃ y phÃ¹ há»£p vá»›i mÃ´ hÃ¬nh cá»§a B2100045
```

---

### C. SO SÃNH SINH VIÃŠN Má»šI vs SINH VIÃŠN CÃ“ TIáº¾N TRÃŒNH

| TiÃªu ChÃ­ | Sinh ViÃªn Má»›i | Sinh ViÃªn CÃ³ Tiáº¿n TrÃ¬nh |
|---------|------|---------|
| **Äá»‹nh nghÄ©a** | KhÃ´ng cÃ³ TienTrinh (láº§n Ä‘áº§u) | CÃ³ â‰¥1 ká»³ há»c (lá»‹ch sá»­ há»c) |
| **Dá»¯ liá»‡u input** | KhÃ´ng cÃ³ | 53-chiá»u feature vector |
| **PhÆ°Æ¡ng phÃ¡p gá»£i Ã½** | Fallback: Ontime graduates | K-Means Clustering |
| **Dá»¯ liá»‡u tham kháº£o** | Sinh viÃªn tá»‘t (OnTime + Graduated) | Sinh viÃªn cÃ¹ng cluster |
| **Sá»‘ mÃ´n gá»£i Ã½** | Top 8 mÃ´n HK1 nÄƒm 1 | Top 8 mÃ´n HK tiáº¿p theo |
| **NÄƒm/Ká»³ Ä‘Æ°á»£c gá»£i Ã½** | Year 1, Semester 1 | NÄƒm/ká»³ hiá»‡n táº¡i +1 |
| **Äá»™ cÃ¡ nhÃ¢n hÃ³a** | Tháº¥p (dÃ¹ng máº«u chung) | Cao (dá»±a trÃªn lá»‹ch sá»­ cÃ¡ nhÃ¢n) |
| **Äá»™ chÃ­nh xÃ¡c** | Trung bÃ¬nh (~70%) | Cao (~85%+) |
| **Model dÃ¹ng** | KhÃ´ng dÃ¹ng | K-Means (5 clusters) |
| **VÃ­ dá»¥** | B2200012 (má»›i) â†’ HK1 Y1: CT100, TN010, QP010-QP013, TC100_2 | B2100045 (Cluster 1) â†’ HK1 Y5: CT555, CT556, CT400, v.v. |

---

### D. FLOW CHART - Gá»£i Ã½ Sinh ViÃªn

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sinh viÃªn vÃ o /dashboard            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHECK: Sinh viÃªn cÃ³ TienTrinh khÃ´ng?   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚ CÃ“                             â”‚ KHÃ”NG
     â”‚ (â‰¥1 record)                    â”‚ (0 records)
     â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLUSTERING STRATEGY  â”‚    â”‚ FALLBACK STRATEGY       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Get features (53) â”‚    â”‚ 1. Query OnTime +       â”‚
â”‚ 2. Normalize         â”‚    â”‚    Graduated students   â”‚
â”‚ 3. Predict cluster   â”‚    â”‚ 2. Láº¥y HK1 nÄƒm 1 cá»§a há»â”‚
â”‚ 4. Find similar SV   â”‚    â”‚ 3. Top 8 mÃ´n phá»• biáº¿n   â”‚
â”‚ 5. Analyze courses   â”‚    â”‚ 4. Return danh sÃ¡ch     â”‚
â”‚ 6. Return top 8      â”‚    â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚
       â”‚ Cluster 0: CT555,          â”‚ HK1 Y1: CT100, TN010,
       â”‚ CT556, ... (8 courses)     â”‚ QP010-QP013, ... (8 courses)
       â”‚                            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Display on Dashboard    â”‚
         â”‚ - Recommendation group  â”‚
         â”‚ - Course list (8 items) â”‚
         â”‚ - Button "Xem chi tiáº¿t" â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### E. Code Path trong Há»‡ Thá»‘ng

**Cho Sinh ViÃªn Má»›i:**
```
app.py: dashboard()
  â””â”€> recommend_next_courses(student_id)
        â””â”€> Kiá»ƒm tra TienTrinh (rá»—ng)
              â””â”€> recommend_for_new_student()
                    â””â”€> query OnTime + Graduated students
                          â””â”€> get HK1 Y1 courses
                                â””â”€> return top 8
```

**Cho Sinh ViÃªn CÃ³ Tiáº¿n TrÃ¬nh:**
```
app.py: dashboard()
  â””â”€> recommend_next_courses(student_id)
        â””â”€> Kiá»ƒm tra TienTrinh (cÃ³ dá»¯ liá»‡u)
              â””â”€> clustering_recommender_v2.get_recommendations()
                    â”œâ”€> get_student_features() â†’ 53-chiá»u vector
                    â”œâ”€> assign_to_cluster() â†’ K-Means predict
                    â”œâ”€> find_similar_students() â†’ Sinh viÃªn cÃ¹ng cluster
                    â””â”€> analyze_next_courses() â†’ top 8 mÃ´n HK tiáº¿p theo
```


### 7. Clustering & K-Means Model
- **Module:** `recommender/train_model.py`
- **Chá»©c nÄƒng:**
  - Train K-Means (k=5) trÃªn dá»¯ liá»‡u sinh viÃªn tá»« file Excel
  - Features: 663 chiá»u (51 mÃ´n Ã— 13 ká»³)
  - Standardize: StandardScaler (z-score normalization)
  - LÆ°u model: `models/kmeans_model.pkl`
  - Tá»± Ä‘á»™ng train láº§n Ä‘áº§u náº¿u model chÆ°a tá»“n táº¡i
  
- **Route:** `POST /train` (endpoint Ä‘á»ƒ train láº¡i model)
  - Params: `excel_path` (Ä‘Æ°á»ng dáº«n file Excel)
  - Response: JSON vá»›i Ä‘Æ°á»ng dáº«n model
  
- **5 Cluster Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh:**
  - Cluster 0: á»”n Ä‘á»‹nh, tÃ­ch luá»¹ Ä‘á»u
  - Cluster 1: TÄƒng Ä‘á»™t biáº¿n theo ká»³
  - Cluster 2: Singleton / Báº¥t thÆ°á»ng
  - Cluster 3: Thiáº¿u ná»n táº£ng
  - Cluster 4: Xuáº¥t sáº¯c / Dáº«n Ä‘áº§u

---

## ğŸ“š CHá»¨C NÄ‚NG 5 Káº¾ HOáº CH Há»ŒC Táº¬P

### 8. Hiá»ƒn thá»‹ 5 Káº¿ Hoáº¡ch Há»c Táº­p
- **Route:** `GET /learning-plans`
- **Chá»©c nÄƒng:**
  - Táº£i file JSON: `data/learning_plans_5_clusters.json` (hoáº·c `data/learning_plans_uploaded.json` náº¿u cÃ³ upload)
  - Hiá»ƒn thá»‹ 5 káº¿ hoáº¡ch tÆ°Æ¡ng á»©ng 5 clusters
  - **Má»—i káº¿ hoáº¡ch chá»©a:**
    - TÃªn káº¿ hoáº¡ch & mÃ´ táº£ chi tiáº¿t
    - ğŸ“š **Danh sÃ¡ch mÃ´n há»c chi tiáº¿t theo 4 há»c ká»³:**
      - Ká»³ 1, 2, 3, 4 (má»—i ká»³: tÃªn mÃ´n, tÃ­n chá»‰, loáº¡i, Ä‘á»™ Æ°u tiÃªn)
    - ğŸ“Š **Biá»ƒu Ä‘á»“ tÃ­n chá»‰ theo ká»³** (Chart.js)
  
  - **áº¨n thÃ´ng tin:**
    - MÃ£ sinh viÃªn (top_student)
    - GPA cá»¥ thá»ƒ
    - MÃ£ cluster
  
- **Dá»¯ liá»‡u:** `data/learning_plans_5_clusters.json` (JSON structure)
- **UI Template:** `learning_plans.html` (Bootstrap 5, responsive)

### 9. Download File Káº¿ Hoáº¡ch - PDF Format
- **Route:** `GET /download-plan-pdf?cluster_id={0-4}`
- **Chá»©c nÄƒng:**
  - Táº¡o file PDF tá»« káº¿ hoáº¡ch há»c táº­p
  - TÃªn file: `KeHoach_Nhom{cluster_id}.pdf`
  - MIME type: `application/pdf`
  - **Ná»™i dung PDF:**
    - TiÃªu Ä‘á» káº¿ hoáº¡ch (vá»›i mÃ u sáº¯c theo cluster)
    - MÃ´ táº£ & learning style
    - Giá» há»c/tuáº§n
    - **Danh sÃ¡ch mÃ´n há»c chi tiáº¿t theo ká»³ há»c:**
      - Má»—i ká»³: STT, tÃªn mÃ´n (Ä‘áº§y Ä‘á»§), tÃ­n chá»‰
      - Táº¥t cáº£ 53+ mÃ´n thá»±c táº¿ tá»« file Excel
    - Báº£ng theo Ä‘á»‹nh dáº¡ng chuyÃªn nghiá»‡p
  
  - **TÃ­nh nÄƒng:**
    - Support Unicode tiáº¿ng Viá»‡t (fonts: Arial, Liberation Sans)
    - Äá»‹nh dáº¡ng A4, margin chuáº©n
    - Äáº§y Ä‘á»§ tÃªn mÃ´n khÃ´ng cáº¯t chá»¯
    - In Ä‘Æ°á»£c trá»±c tiáº¿p tá»« browser
  
  - **Tráº¡ng thÃ¡i:** âœ… Hoáº¡t Ä‘á»™ng tá»« trang `/learning-plans`
    - NÃºt "ğŸ“¥ Táº£i xuá»‘ng PDF â†’" trÃªn má»—i card káº¿ hoáº¡ch

### 10. Download File Káº¿ Hoáº¡ch - JSON Format (Legacy)
- **Route:** `GET /download-plan`
- **Chá»©c nÄƒng:**
  - Download file JSON chá»©a 5 káº¿ hoáº¡ch há»c táº­p (khÃ´ng dÃ¹ng thÆ°á»ng xuyÃªn)
  - TÃªn file: `learning_plans_5_clusters.json` hoáº·c `learning_plans_full.json`
  - MIME type: `application/json`
  - Cho phÃ©p backup, import vÃ o há»‡ thá»‘ng khÃ¡c, share vá»›i báº¡n bÃ¨
  
- **Tráº¡ng thÃ¡i:** âœ… Dá»± phÃ²ng (thÆ°á»ng dÃ¹ng PDF)

---

## ğŸ”’ CHá»¨C NÄ‚NG QUáº¢N TRá»Š VIÃŠN (ADMIN SYSTEM)

### 26. ÄÄƒng Nháº­p Admin
- **Route:** `POST /admin/login`
- **Chá»©c nÄƒng:**
  - Form riÃªng cho admin (tab "ğŸ” Admin" trong trang login)
  - XÃ¡c thá»±c: admin_id + password (máº·c Ä‘á»‹nh: admin / admin123)
  - LÆ°u session: `admin_id`, `is_admin` = True
  - Flash message náº¿u sai tÃ i khoáº£n
  
- **UI:** Unified login page `login.html` vá»›i 2 tabs:
  - Tab 1 (Xanh): "ğŸ‘¤ Sinh ViÃªn" â†’ form Ä‘Äƒng nháº­p sinh viÃªn
  - Tab 2 (Äá»): "ğŸ” Admin" â†’ form Ä‘Äƒng nháº­p admin
  - JavaScript `switchTab()` Ä‘á»ƒ chuyá»ƒn tab

### 27. Admin Dashboard
- **Route:** `GET /admin/dashboard`
- **YÃªu cáº§u:** Pháº£i Ä‘Äƒng nháº­p lÃ  admin
- **Chá»©c nÄƒng:**
  - Hiá»ƒn thá»‹ thá»‘ng kÃª há»‡ thá»‘ng:
    - Tá»•ng sá»‘ sinh viÃªn
    - Tá»•ng sá»‘ mÃ´n há»c
    - Tá»•ng records tiáº¿n trÃ¬nh (enrollments)
    - Tráº¡ng thÃ¡i káº¿t ná»‘i database
    - ThÃ´ng tin model K-Means (náº¿u cÃ³)
  
  - **Navigation buttons:**
    - "ğŸ‘¥ Quáº£n LÃ½ Sinh ViÃªn" â†’ `/admin/students`
    - "ğŸ“š Quáº£n LÃ½ MÃ´n Há»c" â†’ `/admin/courses`
    - "âš™ï¸ Há»‡ Thá»‘ng" â†’ (tÃ¹y chá»n)
    - "ğŸšª ÄÄƒng Xuáº¥t" â†’ `/admin/logout`
  
  - **Báº£ng dá»¯ liá»‡u:**
    - `SinhVien`, `MonHoc`, `TienTrinh`
  
- **UI Template:** `admin_dashboard.html` (Bootstrap 5, admin theme)

### 28. Quáº£n LÃ½ Sinh ViÃªn (Admin)
- **Route:** `GET /admin/students`
- **YÃªu cáº§u:** Admin login
- **Chá»©c nÄƒng:**
  - Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ sinh viÃªn
  - Cá»™t: MÃ£ sinh viÃªn, Há» tÃªn, Sá»‘ mÃ´n há»c, TÃ­ch luá»¹ TC, GPA, Tráº¡ng thÃ¡i
  - **Action buttons (per student):**
    - âœï¸ Sá»­a thÃ´ng tin
    - ğŸ“Š Xem chi tiáº¿t tiáº¿n trÃ¬nh
    - âŒ XÃ³a sinh viÃªn
  
  - **TÃ­nh nÄƒng:**
    - PhÃ¢n trang (20 sinh viÃªn/trang)
    - TÃ¬m kiáº¿m theo mÃ£/tÃªn
    - Sáº¯p xáº¿p theo cá»™t
    - Bulk action (export CSV)
  
- **UI Template:** `admin_students.html`

### 29. Quáº£n LÃ½ MÃ´n Há»c (Admin)
- **Route:** `GET /admin/courses`
- **YÃªu cáº§u:** Admin login
- **Chá»©c nÄƒng:**
  - Hiá»ƒn thá»‹ danh sÃ¡ch táº¥t cáº£ mÃ´n há»c (90+ mÃ´n)
  - Cá»™t: MÃ£ mÃ´n, TÃªn mÃ´n, TÃ­n chá»‰, Loáº¡i, TiÃªn quyáº¿t
  - **Action buttons:**
    - âœï¸ Sá»­a thÃ´ng tin
    - ğŸ“– Xem sinh viÃªn há»c
    - âŒ XÃ³a mÃ´n
    - â• ThÃªm tiÃªn quyáº¿t
  
  - **TÃ­nh nÄƒng:**
    - TÃ¬m kiáº¿m, sáº¯p xáº¿p
    - Bulk import tá»« Excel
    - Export danh sÃ¡ch
  
- **UI Template:** `admin_courses.html`

### 30. Admin Logout
- **Route:** `GET /admin/logout`
- **Chá»©c nÄƒng:**
  - XoÃ¡ session admin
  - Chuyá»ƒn hÆ°á»›ng vá» trang Ä‘Äƒng nháº­p
  - Flash message "ÄÃ£ Ä‘Äƒng xuáº¥t"

### 31. Unified Login Page (Student + Admin)
- **Routes:** `GET /login`, `GET /`
- **Template:** `login.html`
- **Chá»©c nÄƒng:**
  - Má»™t trang login chung cho cáº£ sinh viÃªn vÃ  admin
  - JavaScript tab switching:
    - Tab "ğŸ‘¤ Sinh ViÃªn" (mÃ u xanh): POST `/login` (student login)
    - Tab "ğŸ” Admin" (mÃ u Ä‘á»): POST `/admin/login` (admin login)
  
  - **Logic:**
    - Khi form submit, tá»± Ä‘á»™ng detect dá»±a trÃªn tab active
    - Sinh viÃªn â†’ redirect `/dashboard`
    - Admin â†’ redirect `/admin/dashboard`
  
  - **Styling:**
    - Bootstrap 5 responsive
    - Card design Ä‘áº¹p
    - Highlight active tab

---

### 37. PhÃ¢n TÃ­ch TiÃªn Quyáº¿t (Prerequisite Utils)
- **Module:** `recommender/prerequisite_utils.py`
- **Chá»©c nÄƒng:**
  - Kiá»ƒm tra tiÃªn quyáº¿t mÃ´n há»c
  - XÃ¡c Ä‘á»‹nh mÃ´n há»c cÃ³ thá»ƒ há»c Ä‘Æ°á»£c dá»±a trÃªn mÃ´n Ä‘Ã£ há»c
  - Lá»c mÃ´n gá»£i Ã½ khÃ´ng vi pháº¡m tiÃªn quyáº¿t
  
- **Báº£ng dá»¯ liá»‡u:** `TienQuyet` (CourseCode, PrerequisiteCode)

### 38. Recommender ThÃ´ng Minh (Smart Course Recommender)
- **Module:** `recommender/smart_course_recommender.py`
- **Chá»©c nÄƒng:**
  - Gá»£i Ã½ giÃ¡o dá»¥c thÃªm vá»›i logic Ä‘áº·c biá»‡t
  - CÃ³ thá»ƒ khÃ´ng Ä‘Æ°á»£c dÃ¹ng trong flow chÃ­nh (legacy)

### 39. Recommender PhiÃªn Báº£n 1 & 2 (Clustering-based)
- **Module:** 
  - `recommender/clustering_recommender.py` (v1)
  - `recommender/clustering_recommender_v2.py` (v2 - hiá»‡n dÃ¹ng)
- **Chá»©c nÄƒng:**
  - Assign sinh viÃªn má»›i vÃ o cluster (dá»±a trÃªn K-Means)
  - TÃ¬m sinh viÃªn cÃ¹ng cluster
  - PhÃ¢n tÃ­ch mÃ´ hÃ¬nh há»c táº­p tÆ°Æ¡ng tá»±
  - Gá»£i Ã½ mÃ´n há»c dá»±a trÃªn cluster
  - Return: Danh sÃ¡ch mÃ´n prioritized

### 40. Ontime Graduate Recommender (Fallback Strategy)
- **Module:** `recommender/ontime_graduate_recommender.py`
- **Chá»©c nÄƒng chÃ­nh:**
  - **recommend_based_on_ontime_graduates()**: Gá»£i Ã½ tá»« sinh viÃªn OnTime + Graduated
  - **recommend_for_new_student()**: Gá»£i Ã½ cho sinh viÃªn má»›i (HK1 nÄƒm 1)
  - Lá»c: sinh viÃªn cÃ³ OnTime=True, Graduated=True, Pass_Rate >= 50%
  - PhÃ¢n tÃ­ch: Táº¥t cáº£ sinh viÃªn nÃ y há»c mÃ´n gÃ¬ á»Ÿ HK1 nÄƒm 1?
  - Gá»£i Ã½: Top 8 mÃ´n phá»• biáº¿n (tá»« khoáº£ng 26 mÃ´n trong HK1 nÄƒm 1)
  
- **Fallback trong flow:**
  - Gá»i `recommend_based_on_ontime_graduates()`
  - Náº¿u sinh viÃªn khÃ´ng cÃ³ TienTrinh (má»›i) â†’ tá»± Ä‘á»™ng gá»i `recommend_for_new_student()`

### 41. Train Model (K-Means & Scaler)
- **Module:** `recommender/train_model.py`
- **Chá»©c nÄƒng:**
  - Train K-Means (k=5) trÃªn dá»¯ liá»‡u sinh viÃªn tá»« file Excel
  - Features: 53 chiá»u (53 unique courses)
  - Standardize: StandardScaler (z-score normalization)
  - LÆ°u models:
    - `models/kmeans_model.pkl` (K-Means model)
    - `models/scaler.pkl` (StandardScaler)
  - Tá»± Ä‘á»™ng train láº§n Ä‘áº§u náº¿u model chÆ°a tá»“n táº¡i
  
- **Route:** `POST /train` (endpoint Ä‘á»ƒ train láº¡i model)
  - Params: `excel_path` (Ä‘Æ°á»ng dáº«n file Excel)
  - Response: JSON vá»›i Ä‘Æ°á»ng dáº«n models

## ğŸ“± CHá»¨C NÄ‚NG GIAO DIá»†N (UI)

### 14. Template `login.html`
- Form Ä‘Äƒng nháº­p: MÃ£ sinh viÃªn + Máº­t kháº©u
- Submit: POST `/login`

### 15. Template `student_dashboard.html`
- Header: ThÃ´ng tin sinh viÃªn, nÃºt logout, nÃºt menu
- Section 1: ThÃ´ng tin tÃ­n chá»‰ (Progress bar, tá»•ng TC, TC cÃ²n láº¡i)
- Section 2: Lá»‹ch sá»­ há»c táº­p (Báº£ng mÃ´n há»c Ä‘Ã£ há»c)
- Section 3: Gá»£i Ã½ mÃ´n há»c tiáº¿p theo (Danh sÃ¡ch + nÃºt xem chi tiáº¿t)
- Navigation buttons: "ğŸ“š 5 Káº¿ Hoáº¡ch Há»c Táº­p", "Xem HK1 NÄƒm 5"

### 16. Template `learning_plans.html`
- Header: TiÃªu Ä‘á» + Quay láº¡i button
- 5 Plan Cards (color-coded by cluster):
  - Card header (tÃªn, mÃ´ táº£)
  - Meta info: Giá»/tuáº§n, Learning style, Rá»§i ro
  - Má»¥c tiÃªu
  - Danh sÃ¡ch mÃ´n theo ká»³ (Báº£ng)
  - Biá»ƒu Ä‘á»“ tÃ­n chá»‰ (Chart.js)
  - Máº¹o há»c táº­p
- Footer: HÆ°á»›ng dáº«n sá»­ dá»¥ng



### 19. Template `index.html`
- TÆ°Æ¡ng tá»± `login.html` (hoáº·c redirect to login)

---

## ğŸ’¾ CHá»¨C NÄ‚NG Dá»® LIá»†U

## ğŸ’¾ CHá»¨C NÄ‚NG Dá»® LIá»†U & FILE MANAGEMENT

### Data Files Structure
- **`data/learning_plans_full.json`**: 
  - 5 káº¿ hoáº¡ch há»c táº­p (nhÃ³m 0-4)
  - Má»—i plan: 9 ká»³ há»c, 50+ mÃ´n thá»±c táº¿ tá»« Excel
  - Tá»•ng: ~110-120 TC per plan (tá»« 156 TC Excel distributed)
  - Fields: cluster_id, name, description, objectives, color, main_risk, top_student, key_tips, semesters[]
  - MÃ´n há»c: láº¥y tá»« Excel (53 unique courses)

- **`data/student_data_100-2.xlsx`**:
  - 100 sinh viÃªn (B2100001 - B2100078, B2200012)
  - 5 nÄƒm há»c (Year 1-5, 13 ká»³ há»c)
  - 53 unique courses
  - 4000+ enrollment records (TienTrinh)
  - **Ká»³ há»c cÃ³ sáºµn:**
    - Year 1: Ká»³ 1 (13 TC), Ká»³ 2 (20 TC), Ká»³ 3 (1 TC)
    - Year 2: Ká»³ 1 (17 TC), Ká»³ 2 (16 TC), Ká»³ 3 (3 TC)
    - Year 3: Ká»³ 1 (17 TC), Ká»³ 2 (17 TC), Ká»³ 3 (1 TC)
    - Year 4: Ká»³ 1 (18 TC), Ká»³ 2 (15 TC), Ká»³ 3 (3 TC)
    - Year 5: Ká»³ 1 (15 TC)
    - **Total: 156 TC**

- **`models/kmeans_model.pkl`**:
  - K-Means model (k=5 clusters)
  - Features: 53 chiá»u (mÃ´n há»c)
  - Fitted trÃªn 78 sinh viÃªn
  - Auto-load/train khi cáº§n

- **`models/scaler.pkl`**:
  - StandardScaler cho z-score normalization
  - DÃ¹ng Ä‘á»ƒ chuáº©n hÃ³a feature trÆ°á»›c khi predict cluster

### 35. Load & Xá»­ LÃ½ File Excel
- **Module:** `etl/load_excel.py`
- **Chá»©c nÄƒng:**
  - Äá»c file `data/student_data_100-2.xlsx`
  - Load 78 sinh viÃªn + 4000+ enrollments
  - Prepare data cho clustering & recommendation
  - Return: DataFrame vá»›i columns (StudentID, Year, Semester, CourseCode, CourseName, Credits, Score, GPA, OnTime, Grad)

### 36. Config & Database Connection
- **File:** `config.py`
- **Chá»©c nÄƒng:**
  - Káº¿t ná»‘i MySQL: host, port, user, password, database
  - Há»— trá»£ reconnect khi máº¥t káº¿t ná»‘i
  - Config Flask secret key
  - Config session timeout

---

---

## ğŸ§ª CHá»¨C NÄ‚NG TEST & DEBUG

### 23. Test Files
- **CÃ¡c file test:**
  - `test_new_student_recommender.py`: Unit test gá»£i Ã½ sinh viÃªn má»›i
  - `test_integration_new_student.py`: Integration test
  - `test_recommendation_B2200012.py`: Test gá»£i Ã½ cá»¥ thá»ƒ
  - `test_login_B2200012.py`: Test Ä‘Äƒng nháº­p
  - `test_clustering_integration.py`: Test clustering
  - `demo_new_student.py`: Demo so sÃ¡nh new vs old student
  - VÃ  5+ test files khÃ¡c

### 24. Script Tiá»‡n Ãch
- `interactive_add_student.py`: ThÃªm sinh viÃªn tÆ°Æ¡ng tÃ¡c
- `generate_sql_with_password.py`: Táº¡o SQL thÃªm sinh viÃªn cÃ³ hash password
- `add_student_B2200012.py`: Script thÃªm sinh viÃªn cá»¥ thá»ƒ
- `check_year4_year5_data.py`: Kiá»ƒm tra dá»¯ liá»‡u nÄƒm 4-5

---

## ğŸ“Š CHá»¨C NÄ‚NG ADVANCED (TÃ¹y Chá»n)

### 32. A/B Test & So SÃ¡nh Chiáº¿n LÆ°á»£c
- **File:** `compare_recommendation_approaches.py`
- **Chá»©c nÄƒng:**
  - So sÃ¡nh káº¿t quáº£ gá»£i Ã½ tá»« nhiá»u chiáº¿n lÆ°á»£c
  - So sÃ¡nh: Clustering vs OnTime graduates vs Smart recommender

### 33. Clustering Performance Analysis
- **Chá»©c nÄƒng:**
  - PhÃ¢n tÃ­ch Ä‘á»™ tá»‘t cá»§a K-Means model
  - TÃ­nh Silhouette Score, Inertia
  - Visualize cluster distribution

### 34. Data Validation & Quality Check
- **Chá»©c nÄƒng:**
  - Kiá»ƒm tra tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u
  - Detect missing values, duplicates
  - Report data quality metrics

---

## ğŸ“‹ DANH SÃCH Báº¢NG Dá»® LIá»†U CHÃNH

| Báº£ng | Cá»™t ChÃ­nh | Má»¥c ÄÃ­ch |
|------|-----------|---------|
| `SinhVien` | StudentID, Password, HoTen, ... | Quáº£n lÃ½ tÃ i khoáº£n sinh viÃªn |
| `MonHoc` | CourseCode, CourseName, Credits, ... | Danh má»¥c mÃ´n há»c |
| `TienTrinh` | StudentID, CourseCode, Year, Semester, Grade, Status | Lá»‹ch sá»­ há»c |
| `TienQuyet` | CourseCode, PrerequisiteCode | TiÃªn quyáº¿t mÃ´n |

---

## ğŸ¯ LUá»’NG HOáº T Äá»˜NG CHÃNH

### Luá»“ng Sinh ViÃªn (Student Flow):
```
1. Truy cáº­p http://localhost:5000/
   â†“
2. Chá»n tab "ğŸ‘¤ Sinh ViÃªn" â†’ ÄÄƒng nháº­p
   â†“
3. POST /login (StudentID + Password)
   â†“
4. VÃ o Dashboard (/dashboard)
   â”œâ”€ Hiá»ƒn thá»‹: thÃ´ng tin cÃ¡ nhÃ¢n, progress bar TC
   â”œâ”€ Lá»‹ch sá»­ há»c (táº¥t cáº£ mÃ´n Ä‘Ã£ há»c)
   â””â”€ Gá»£i Ã½ mÃ´n há»c tiáº¿p theo (náº¿u cÃ³)
   â†“
5. Chá»n "ğŸ“š 5 Káº¿ Hoáº¡ch Há»c Táº­p" â†’ /learning-plans
   â”œâ”€ Xem 5 nhÃ³m há»c táº­p (0-4)
   â”œâ”€ Xem chart tÃ­n chá»‰ per cluster
   â””â”€ Chá»n nhÃ³m phÃ¹ há»£p
   â†“
6. NÃºt "ğŸ“¥ Táº£i xuá»‘ng PDF â†’" trÃªn má»—i káº¿ hoáº¡ch
   â”œâ”€ GET /download-plan-pdf?cluster_id={0-4}
   â””â”€ Download KeHoach_Nhom{id}.pdf (Unicode tiáº¿ng Viá»‡t)
   â†“
7. Chá»n "ğŸšª Logout" â†’ xoÃ¡ session
```

### Luá»“ng Admin (Admin Flow):
```
1. Truy cáº­p http://localhost:5000/login
   â†“
2. Chá»n tab "ğŸ” Admin" â†’ ÄÄƒng nháº­p
   â†“
3. POST /admin/login (admin_id + password)
   â†“
4. VÃ o Admin Dashboard (/admin/dashboard)
   â”œâ”€ Xem thá»‘ng kÃª: SV, MÃ´n, Tiáº¿n trÃ¬nh
   â””â”€ Navigation: Students, Courses, System
   â†“
5. "ğŸ‘¥ Quáº£n LÃ½ Sinh ViÃªn" (/admin/students)
   â”œâ”€ Danh sÃ¡ch táº¥t cáº£ sinh viÃªn
   â”œâ”€ TÃ¬m kiáº¿m, sáº¯p xáº¿p, phÃ¢n trang
   â””â”€ Action: Edit, View, Assign Cluster, Delete
   â†“
6. "ğŸ“š Quáº£n LÃ½ MÃ´n Há»c" (/admin/courses)
   â”œâ”€ Danh sÃ¡ch 90+ mÃ´n há»c
   â”œâ”€ TÃ¬m kiáº¿m, sáº¯p xáº¿p
   â””â”€ Action: Edit, View Students, Delete
   â†“
7. "ğŸšª Logout" â†’ xoÃ¡ session admin
```

### Luá»“ng Gá»£i Ã MÃ´n Há»c (Recommendation Engine):
```
Backend Flow:
1. Sinh viÃªn vÃ o /dashboard
   â†“
2. System check: TienTrinh cÃ³ dá»¯ liá»‡u khÃ´ng?
   â”œâ”€ CÃ“: â†’ Gá»i clustering_recommender_v2.py
   â”‚  â”œâ”€ Load K-Means model
   â”‚  â”œâ”€ Assign sinh viÃªn vÃ o cluster
   â”‚  â”œâ”€ TÃ¬m sinh viÃªn cÃ¹ng cluster
   â”‚  â”œâ”€ PhÃ¢n tÃ­ch mÃ´n há» há»c tiáº¿p theo
   â”‚  â””â”€ Return danh sÃ¡ch gá»£i Ã½ (prioritized)
   â”‚
   â””â”€ KHÃ”NG: â†’ Gá»i ontime_graduate_recommender.py
      â”œâ”€ Láº¥y sinh viÃªn: OnTime=True, Graduated=True
      â”œâ”€ PhÃ¢n tÃ­ch HK1 nÄƒm 1 cá»§a há»
      â”œâ”€ Return top 8 mÃ´n phá»• biáº¿n
      â””â”€ DÃ¹ng lÃ m default gá»£i Ã½
   â†“
3. Display trÃªn dashboard
   â”œâ”€ Grouped by: HK1 NÄƒm 5, CÃ¡c mÃ´n bá»• sung
   â””â”€ NÃºt "Xem chi tiáº¿t" â†’ /recommendations/hk1-nam5
```

---

## âœ… KIá»‚M DANH CÃC CHá»¨C NÄ‚NG

- âœ… ÄÄƒng nháº­p / ÄÄƒng xuáº¥t (Student)
- âœ… ÄÄƒng nháº­p / ÄÄƒng xuáº¥t (Admin)
- âœ… Unified login page vá»›i 2 tabs
- âœ… Dashboard chÃ­nh (Student)
- âœ… Admin Dashboard vá»›i thá»‘ng kÃª
- âœ… Quáº£n lÃ½ sinh viÃªn (Admin)
- âœ… Quáº£n lÃ½ mÃ´n há»c (Admin)
- âœ… Lá»‹ch sá»­ há»c táº­p
- âœ… Gá»£i Ã½ mÃ´n há»c (K-Means clustering)
- âœ… Gá»£i Ã½ sinh viÃªn má»›i (Fallback)
- âœ… Gá»£i Ã½ HK1 nÄƒm 5 chi tiáº¿t
- âœ… 5 káº¿ hoáº¡ch há»c táº­p
- âœ… Biá»ƒu Ä‘á»“ tÃ­n chá»‰ theo ká»³ (Chart.js)
- âœ… **PDF download káº¿ hoáº¡ch (Unicode tiáº¿ng Viá»‡t)**
- âœ… JSON download káº¿ hoáº¡ch (legacy)
- âœ… Upload file káº¿ hoáº¡ch
- âœ… TiÃªn quyáº¿t mÃ´n
- âœ… Clustering (K-Means, k=5)
- âœ… Train model tá»« Excel
- âœ… Session management (Student + Admin)
- âœ… Flash messages (error/success)
- âœ… Mobile responsive (Bootstrap 5)
- âœ… **Dá»¯ liá»‡u tá»« Excel (53+ mÃ´n há»c thá»±c táº¿)**
- âœ… **Font Unicode tiáº¿ng Viá»‡t trong PDF**

---

## ğŸš€ CHá»¨C NÄ‚NG Sáº®P Tá»šI (Optional Enhancements) (Ä‘á»ƒ 1 sá»‘ cÃ¡i vÃ o hÆ°á»›ng phÃ¡t triá»ƒn trong word)

- [ ] Improved PDF layout (multi-page, header/footer)
- [ ] Export káº¿ hoáº¡ch thÃ nh Excel
- [ ] Assign sinh viÃªn vÃ o cluster cá»¥ thá»ƒ (Admin)
- [ ] Personalized plan recommendation
- [ ] Interactive plan customization
- [ ] Database integration Ä‘á»ƒ track cluster assignment
- [ ] Share plan via link/email
- [ ] Plan progress tracking & checkoff
- [ ] Cache K-Means model
- [ ] API endpoints riÃªng (RESTful)
- [ ] Advanced admin analytics & reports
- [ ] Email notification cho sinh viÃªn
- [ ] Mobile app (Flutter/React Native)
- [ ] Dark mode UI theme
- [ ] Multi-language support (English)

---


